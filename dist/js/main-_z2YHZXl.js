function e(e,t,n){let o=!1;t.length>0&&(o=Array.from(t).some(e=>"checkbox"===e.type?e.checked:""!==e.value.trim())),n&&(o?(n.style.display="flex",e.classList.add("catalog__filter__block--active")):(n.style.display="none",e.classList.remove("catalog__filter__block--active")))}function t(t){const o=t.querySelectorAll(".catalog__filter__input, .catalog__filter__checkbox__input"),c=t.querySelector(".catalog__filter__reset"),a=t.querySelector(".catalog__filter__show-more");o.forEach(n=>{"checkbox"===n.type?n.addEventListener("change",()=>{e(t,o,c)}):(n.addEventListener("input",()=>{e(t,o,c)}),n.addEventListener("blur",()=>{e(t,o,c)}))}),c&&c.addEventListener("click",()=>{!function(e,t,o){t.forEach(e=>{"checkbox"===e.type?e.checked=!1:e.value=""}),o.style.display="none",e.classList.remove("catalog__filter__block--active"),t.forEach(e=>{"checkbox"!==e.type&&e.blur()}),r(),n()}(t,o,c)}),a&&(a.dataset.expanded="false",a.addEventListener("click",()=>{!function(e,t){const n=e.querySelectorAll(".catalog__filter__checkbox"),o="true"===t.dataset.expanded;n.forEach((e,t)=>{t>=5&&(o?e.classList.add("catalog__filter__checkbox--hidden"):e.classList.remove("catalog__filter__checkbox--hidden"))}),t.textContent=o?"Показать ещё":"Скрыть",t.dataset.expanded=o?"false":"true"}(t,a)})),e(t,o,c)}function n(){o()}function o(){const e=document.querySelectorAll(".catalog__filter__block"),t=[];return e.forEach(e=>{const n=e.getAttribute("data-filter"),o=e.querySelector(".catalog__filter__title").textContent,r=e.querySelectorAll(".catalog__filter__checkbox__input:checked");r.length>0&&r.forEach(e=>{const r=e.closest(".catalog__filter__checkbox").querySelector(".catalog__filter__checkbox__text").textContent;t.push({type:"checkbox",filterType:n,filterTitle:o,value:r,element:e})});if(2===e.querySelectorAll(".catalog__filter__input").length){const r=e.querySelector('[data-field="from"]'),c=e.querySelector('[data-field="to"]');if(r&&c&&(r.value.trim()||c.value.trim())){const e=r.value.trim()||"",a=c.value.trim()||"";let i="";e&&a?i=`от ${e} до ${a}`:e?i=`от ${e}`:a&&(i=`до ${a}`),i&&t.push({type:"range",filterType:n,filterTitle:o,value:i,fromElement:r,toElement:c})}}}),t}function r(){const e=document.querySelector(".catalog__active__filters");if(!e)return;const t=o();e.innerHTML="",t.forEach(t=>{const o=document.createElement("div");o.className="catalog__active__filter__item",o.setAttribute("data-filter-type",t.filterType);let c="";"checkbox"===t.type?c=t.value:"range"===t.type&&(c=`${t.filterTitle}: ${t.value}`),o.innerHTML=`\n            <span>${c}</span>\n            <button type="button" class="catalog__active__filter__remove">\n                <img src="./img/svg/close-white.svg" alt="Закрыть">\n            </button>\n        `;o.querySelector(".catalog__active__filter__remove").addEventListener("click",()=>{!function(e){"checkbox"===e.type?(e.element.checked=!1,e.element.dispatchEvent(new Event("change"))):"range"===e.type&&(e.fromElement.value="",e.toElement.value="",e.fromElement.dispatchEvent(new Event("input")),e.fromElement.dispatchEvent(new Event("blur")),e.toElement.dispatchEvent(new Event("input")),e.toElement.dispatchEvent(new Event("blur")));r(),n()}(t)}),e.appendChild(o)}),function(){const e=document.querySelector(".catalog__filters__open");if(!e)return;const t=o().length;t>0?(e.classList.add("has-active-filters"),e.innerHTML=`\n            <span>Фильтры <span class="catalog__filters__active__count">(${t})</span></span>\n        `):(e.classList.remove("has-active-filters"),e.innerHTML="\n            <span>Фильтры</span>\n        ")}()}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".header-fixed"),t=document.querySelector(".header");if(!e||!t)return;window.addEventListener("scroll",function(){(window.pageYOffset||document.documentElement.scrollTop)>100?e.classList.add("show"):e.classList.remove("show")},{passive:!0});const n=e.querySelector(".header-fixed__searchform__input");e.querySelector(".header-fixed__address"),e.querySelector(".header-fixed__catalog"),e.querySelector(".header-fixed__btns"),n&&(n.addEventListener("focus",function(){e.classList.add("search-focused")}),n.addEventListener("blur",function(){e.classList.remove("search-focused")}))}),document.addEventListener("DOMContentLoaded",()=>{[{container:document.querySelector(".header"),prefix:"header__"},{container:document.querySelector(".header-fixed"),prefix:"header-fixed__"}].forEach(({container:e,prefix:t})=>{e&&function(e,t=""){const n=e.querySelector(`.${t}catalog__btn`),o=e.querySelector(".header__catalog__dropdown__content--fixed")||e.querySelector(`.${t}catalog__dropdown__content`),r=e.querySelectorAll(".header__catalog__category"),c=e.querySelectorAll(".header__catalog__subcategories");if(n&&o){if(r.length>0&&c.length>0){const t=r[0],n=t.getAttribute("data-category"),o=e.querySelector(`.header__catalog__subcategories[data-category="${n}"]`);t&&o&&(t.classList.add("active"),o.classList.add("active"))}n.addEventListener("click",e=>{e.preventDefault(),o.classList.toggle("active"),n.classList.toggle("active")}),document.addEventListener("click",e=>{n.contains(e.target)||o.contains(e.target)||(o.classList.remove("active"),n.classList.remove("active"))}),r.forEach(t=>{t.addEventListener("mouseenter",()=>{const n=t.getAttribute("data-category");r.forEach(e=>e.classList.remove("active")),t.classList.add("active"),c.forEach(e=>{e.classList.remove("active")});const o=e.querySelector(`.header__catalog__subcategories[data-category="${n}"]`);o&&o.classList.add("active")})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(o.classList.remove("active"),n.classList.remove("active"))})}}(e,t)})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".burger-btn"),t=document.querySelector(".header__burger-menu");e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active")})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".mobile-search-btn"),t=document.getElementById("mobile-search"),n=null==t?void 0:t.querySelector(".header__searchform__input"),o=null==t?void 0:t.querySelector(".mobile-search__close"),r=document.body;if(e&&t&&n&&o){let c=function(){t.classList.remove("active"),r.style.overflow="",n.blur()};e.addEventListener("click",e=>{e.preventDefault(),t.classList.add("active"),r.style.overflow="hidden",setTimeout(()=>{n.focus()},100)}),o.addEventListener("click",e=>{e.preventDefault(),c()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("active")&&c()}),t.addEventListener("click",e=>{e.target===t&&c()}),n.addEventListener("blur",()=>{setTimeout(()=>{t.classList.contains("active")&&!t.contains(document.activeElement)&&c()},150)});const a=t.querySelector(".header__searchform");a&&a.addEventListener("submit",e=>{setTimeout(()=>{c()},500)})}}),document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".banner__swiper")&&new Swiper(".banner__swiper",{navigation:{nextEl:".banner__swiper .swiper-button-next",prevEl:".banner__swiper .swiper-button-prev"},pagination:{el:".banner__swiper .swiper-pagination",clickable:!0},slidesPerView:1,spaceBetween:0,loop:!0,effect:"fade",autoplay:{delay:4e3,disableOnInteraction:!1}})}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".images__swiper").length>0&&document.querySelectorAll(".images__swiper").forEach(e=>{new Swiper(e,{navigation:{nextEl:e.parentElement.querySelector(".swiper-button-next"),prevEl:e.parentElement.querySelector(".swiper-button-prev")},slidesPerView:5,spaceBetween:10,breakpoints:{320:{slidesPerView:2.2},576:{slidesPerView:3.2},992:{slidesPerView:5}}})})}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".products__swiper").length>0&&document.querySelectorAll(".products__swiper").forEach(e=>{new Swiper(e,{navigation:{nextEl:e.parentElement.querySelector(".swiper-button-next"),prevEl:e.parentElement.querySelector(".swiper-button-prev")},slidesPerView:4,spaceBetween:20,breakpoints:{320:{slidesPerView:1.3},576:{slidesPerView:2.2},992:{slidesPerView:4}}})})}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".categories__swiper").length>0&&document.querySelectorAll(".categories__swiper").forEach(e=>{new Swiper(e,{navigation:{nextEl:e.parentElement.querySelector(".swiper-button-next"),prevEl:e.parentElement.querySelector(".swiper-button-prev")},slidesPerView:3,spaceBetween:20,breakpoints:{320:{slidesPerView:1.5},576:{slidesPerView:2.2},992:{slidesPerView:3}}})})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".faq-item");e.forEach(t=>{t.querySelector(".faq-question").addEventListener("click",function(n){n.preventDefault(),t.hasAttribute("open")?t.removeAttribute("open"):(e.forEach(e=>{e!==t&&e.hasAttribute("open")&&e.removeAttribute("open")}),t.setAttribute("open",""))})})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".catalog__category__toggle").forEach(e=>{e.addEventListener("click",function(){const e=this.closest(".catalog__category").querySelector(".catalog__subcategories");if(e){e.classList.contains("active")?(e.classList.remove("active"),this.classList.remove("active")):(e.classList.add("active"),this.classList.add("active"))}})})}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("sort-select");e&&new Choices(e,{searchEnabled:!1,shouldSort:!1,placeholder:!0,placeholderValue:"По умолчанию",itemSelectText:""})}),document.addEventListener("DOMContentLoaded",()=>{!function(){const e=document.querySelectorAll(".catalog__filter__block");e.forEach(e=>{t(e)}),e.forEach(e=>{e.querySelectorAll(".catalog__filter__input, .catalog__filter__checkbox__input").forEach(e=>{"checkbox"===e.type?e.addEventListener("change",()=>{r(),n()}):e.addEventListener("blur",()=>{r(),n()})})}),r()}();const e=document.querySelector(".catalog__sidebar--products"),o=document.querySelector(".catalog__filters__close"),c=document.querySelector(".catalog__filters__open");e&&(c.addEventListener("click",()=>{e.classList.add("active")}),o.addEventListener("click",()=>{e.classList.remove("active")}))}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".footer__column__title--accordion");e.forEach(t=>{t.addEventListener("click",()=>{const n=t.closest(".footer__column").querySelector(".footer__column__list");if(!n)return;const o=t.classList.contains("active");e.forEach(e=>{if(e!==t){e.classList.remove("active");const t=e.closest(".footer__column").querySelector(".footer__column__list");t&&t.classList.remove("active")}}),o?(t.classList.remove("active"),n.classList.remove("active")):(t.classList.add("active"),n.classList.add("active"))})})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("[data-modal]"),t=document.querySelector("body"),n=document.querySelectorAll("[data-modal-close]");function o(e){e.classList.remove("modal--active"),t.style.overflowY="",function(e){e.removeEventListener("keydown",r),e.removeEventListener("click",c)}(e)}function r(e){const t=e.currentTarget;"Escape"===e.key&&o(t)}function c(e){e.currentTarget.querySelector(".modal__content").contains(e.target)||o(e.currentTarget)}e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();const n=e.target.closest("[data-modal]").getAttribute("data-modal"),a=document.getElementById(n);a&&(document.querySelectorAll(".modal").forEach(e=>{o(e)}),a.classList.add("modal--active"),t.style.overflow="hidden",function(e){e.addEventListener("keydown",r),e.addEventListener("click",c)}(a))})}),n.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.closest(".modal");t&&o(t)})})});const c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function a(e){const t=e.value.trim(),n=d(e);return t?c.test(t)?(l(e),!0):(s(e,n,"Введите корректный email адрес"),!1):(s(e,n,"Поле обязательно для заполнения"),!1)}function i(e){const t=e.value.trim(),n=d(e);return t?(l(e),!0):(s(e,n,"Поле обязательно для заполнения"),!1)}function s(e,t,n){e.classList.add("error-input"),t.textContent=n,t.style.display="block"}function l(e){e.classList.remove("error-input");const t=d(e);t.textContent="",t.style.display="none"}function d(e){const t=e.closest(".modal__form__item");return t?t.querySelector(".error-message"):null}function u(){document.querySelectorAll(".modal__form").forEach(e=>{!function(e){const t=e.querySelector('input[name="email"]'),n=e.querySelector('input[name="password"]');t&&(t.addEventListener("blur",()=>{a(t)}),t.addEventListener("input",()=>{l(t)})),n&&(n.addEventListener("blur",()=>{i(n)}),n.addEventListener("input",()=>{l(n)})),e.addEventListener("submit",e=>{e.preventDefault();let o=!0;t&&(a(t)||(o=!1)),n&&(i(n)||(o=!1))})}(e)})}document.addEventListener("DOMContentLoaded",()=>{u()}),document.addEventListener("DOMContentLoaded",()=>{if(!document.querySelector(".product-gallery"))return;const e=new Swiper(".product-gallery__thumbnails .swiper",{spaceBetween:10,slidesPerView:5,direction:"vertical",watchSlidesProgress:!0,navigation:{nextEl:".product-gallery__thumbnails .swiper-button-next",prevEl:".product-gallery__thumbnails .swiper-button-prev"},breakpoints:{320:{direction:"horizontal",slidesPerView:4},576:{direction:"horizontal",slidesPerView:6},1200:{direction:"vertical",slidesPerView:5}},on:{init:function(){this.slides.length<=5?(this.navigation.nextEl.style.display="none",this.navigation.prevEl.style.display="none"):(this.navigation.nextEl.style.display="flex",this.navigation.prevEl.style.display="flex")},slideChange:function(){this.slides.length<=5?(this.navigation.nextEl.style.display="none",this.navigation.prevEl.style.display="none"):(this.navigation.nextEl.style.display="flex",this.navigation.prevEl.style.display="flex")}}});new Swiper(".product-gallery__main .swiper",{spaceBetween:10,thumbs:{swiper:e}}),Fancybox.bind('[data-fancybox="product-gallery"]',{Toolbar:{display:{left:["infobar"],middle:[],right:["slideshow","thumbs","close"]}},Thumbs:{autoStart:!1},Images:{zoom:!0}})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll('input[name="delivery"]'),t=document.querySelector(".checkout__form__delivery__grid");function n(){const e=document.querySelector('input[name="delivery"]:checked');e&&"Самовывоз"===e.value?t.classList.add("d-none"):t.classList.remove("d-none")}e.forEach(e=>{e.addEventListener("change",n)}),n()}),document.addEventListener("DOMContentLoaded",()=>{function e(e,t){const n=e.querySelector(".checkout__products__item__count__value");if(!n)return;let o=(parseInt(n.textContent)||0)+t;o<1&&(o=1),n.textContent=o}const t=document.querySelectorAll(".checkout__products__item__count__btn--minus"),n=document.querySelectorAll(".checkout__products__item__count__btn--plus");t.forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();e(t.closest(".checkout__products__item"),-1)})}),n.forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();e(t.closest(".checkout__products__item"),1)})});document.querySelectorAll(".checkout__products__item__delete").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();!function(e){e.remove()}(e.closest(".checkout__products__item"))})})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".checkout__form");if(!e)return;function t(t,n){var o;const r=e.querySelector(`[name="${t}"]`),c=null==(o=null==r?void 0:r.closest(".form-item"))?void 0:o.querySelector(".error-message");c&&(c.textContent=n,c.style.display="block"),r&&(r.style.border="1px solid #FF0000")}function n(t){var n;const o=e.querySelector(`[name="${t}"]`),r=null==(n=null==o?void 0:o.closest(".form-item"))?void 0:n.querySelector(".error-message");r&&(r.textContent="",r.style.display="none"),o&&(o.style.border="")}async function o(e,o){switch(n(e),e){case"username":if(o&&!/^[а-яёА-ЯЁa-zA-Z\s\-]+$/.test(o))return t(e,"Введите корректное имя"),!1;break;case"surname":if(o&&!/^[а-яёА-ЯЁa-zA-Z\s\-]+$/.test(o))return t(e,"Введите корректную фамилию"),!1;break;case"tel":if(o&&!function(e){const t=e.replace(/\D/g,"");return/^(\+7|7|8)?[0-9]{10}$/.test(t)}(o))return t(e,"Укажите корректный номер"),!1;break;case"email":if(o&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))return t(e,"Укажите корректный email"),!1;break;case"promocode":if(o){if(!(await async function(e){return!e||new Promise(t=>{setTimeout(()=>{t(["SALE10","WELCOME","DISCOUNT"].includes(e.toUpperCase()))},500)})}(o)))return t(e,"Такого промокода не существует"),!1}}return!0}const r=e.querySelectorAll("input[name]");r.forEach(e=>{e.addEventListener("blur",async()=>{await o(e.name,e.value)})}),e.addEventListener("submit",async c=>{c.preventDefault(),r.forEach(e=>n(e.name));let a=function(){const n=["username","surname","tel","email"],o=document.querySelector('input[name="delivery"]:checked');o&&"Самовывоз"!==o.value&&n.push("address","time");let r=!0;return n.forEach(n=>{const o=e.querySelector(`[name="${n}"]`);o&&o.value.trim()||(t(n,"Обязательное поле"),r=!1)}),r}();for(const e of r)if(e.value.trim()){await o(e.name,e.value)||(a=!1)}if(a){const t=new FormData(e);Object.fromEntries(t.entries());!function(){const e=document.getElementById("modal-success"),t=document.querySelector("body");e&&(e.classList.add("modal--active"),t.style.overflow="hidden",setTimeout(()=>{e.classList.remove("modal--active"),t.style.overflow=""},5e3))}()}})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".checkout__mobile__open"),t=document.querySelector(".checkout__left");e&&t&&e.addEventListener("click",n=>{n.preventDefault(),e.classList.add("checkout__mobile__open--hidden"),t.classList.add("checkout__left--active")})}),document.addEventListener("DOMContentLoaded",()=>{});
